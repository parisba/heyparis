{{ define "main" }}
<article class="article">
  <header class="article-header">
    <div class="container container--narrow">
      {{ if eq .Section "posts" }}
      <time class="article-date">{{ .Date.Format "January 2, 2006" }}</time>
      {{ end }}
      <h1 class="article-title">{{ .Title }}</h1>
    </div>
  </header>

  {{ with .Params.cover }}{{ with .image }}
  <figure class="article-cover">
    {{- if $.Params.cover.relative -}}
      {{- $img := $.Resources.GetMatch . -}}
      {{- if $img -}}
        <img src="{{ $img.RelPermalink }}" alt="{{ $.Title }}">
      {{- end -}}
    {{- else if hasPrefix . "/" -}}
      <img src="{{ . }}" alt="{{ $.Title }}">
    {{- else -}}
      <img src="/{{ . }}" alt="{{ $.Title }}">
    {{- end -}}
  </figure>
  {{ end }}{{ end }}

  <div class="article-body container container--narrow">
    {{ .Content }}
  </div>

  {{ with .Params.tags }}
  <footer class="article-footer container container--narrow">
    <div class="article-tags">
      {{ range . }}<a href="{{ "/tags/" | relURL }}{{ . | urlize }}/" class="tag">{{ . }}</a>{{ end }}
    </div>
  </footer>
  {{ end }}

  {{ if eq .Section "posts" }}
  <nav class="article-nav container container--narrow">
    {{ with .PrevInSection }}
    <a href="{{ .Permalink }}" class="article-nav-link article-nav-link--prev">
      <span class="article-nav-label">Previous</span>
      <span class="article-nav-title">{{ .Title | truncate 50 }}</span>
    </a>
    {{ end }}
    {{ with .NextInSection }}
    <a href="{{ .Permalink }}" class="article-nav-link article-nav-link--next">
      <span class="article-nav-label">Next</span>
      <span class="article-nav-title">{{ .Title | truncate 50 }}</span>
    </a>
    {{ end }}
  </nav>
  {{ end }}
</article>
{{ end }}
